# react-app-rewired使用

* 目录
* [`react-app-rewird`介绍](#安装)
* [配置sass/scss](#配置sass/scss)
* [配置alias](#配置alias)
* [注意事项(webpack.config)](#注意事项)


* [`react-app-rewird`](https://github.com/timarney/react-app-rewired/blob/master/README_zh.md)
* `creact-react-app`简称`CRA`是一个创建`react`项目的脚手架，它集成了`webpack`，一般来讲，`CRA`的配置是黑盒的；
* 想要修改`CRA`的`webpack`配置，可以使用`eject`命令来暴露`webpack`配置，但一般不推荐这样做；
* `react-app-rewird`就是用来解决这个问题的，此外还有与之配套的如`custom -cra`, `craco`等等；


## 安装

```bash
npm i react-app-rewired -D
```

## 使用

* 根目录下创建`config-overrides.js`
* 或创建`config-overrides/index.js`
* 内容如下：

```js
moduel.exports = function override (config, env) {
  return config
}
```

* 替换`package.json`的内容

```json
"scripts": {
  "start": "react-app-rewired start",
  "build": "react-app-rewired build",
  "test": "react-app-rewired test --env-jsdom',
}
```

* **PS**: 你还可以指定其他的`config-overrides.js`路径，参考官方文档


## 配置sass/scss

* 配置`sass/scss`无需其他配置，安装`node-sass`即可（注意，`sass-loader`无需安装，这可能会引起额外的错误)


## 配置alias

* 配置`webpack alias`有助于我们在长路径引用时少写几个代码

```js
// npm i -D react-app-rewire-alias
// 使用 alias 别名
const configAlias = (config) => {
  require('react-app-rewire-alias').alias({
    '@views': './src/views',
    // '@assets': './src/assets',
    // '@components': './src/components',
    // '@styles': './src/styles',
  })(config)
}

configAlias(config)
```




## 注意事项

* `webstorm`中可能对`alias`别名路径识别不出，需要手动配置一个`webpack.config.js`在`config-overrides`目录下；
* 并在`webpack.config.js`指定配置内容；
* 然后配置到`setting`-`Languages & Framework`-`-Javascript`-`webpack`下；
* **其他的`webpack`配置亦可如此“映射”到`webstorm`中
